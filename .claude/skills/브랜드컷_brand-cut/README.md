# ë¸Œëœë“œì»· (Brand Cut)

> ë¸Œëœë“œ í™”ë³´ ìŠ¤íƒ€ì¼ ì´ë¯¸ì§€ ìƒì„± - ì–¼êµ´ + ì°©ì¥ + ì»¨ì…‰ ì¡°í•©

---

## ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Brand Cut Workflow                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   INPUT      â”‚     â”‚   ANALYZE    â”‚     â”‚   GENERATE   â”‚     â”‚   VALIDATE   â”‚
â”‚              â”‚     â”‚              â”‚     â”‚              â”‚     â”‚              â”‚
â”‚ Face Image   â”‚â”€â”€â”€â”€>â”‚ Outfit       â”‚â”€â”€â”€â”€>â”‚ Prompt       â”‚â”€â”€â”€â”€>â”‚ 5-Gate       â”‚
â”‚ Outfit Image â”‚     â”‚ Analysis     â”‚     â”‚ Builder      â”‚     â”‚ Sequential   â”‚
â”‚ Concept      â”‚     â”‚ (VLM)        â”‚     â”‚              â”‚     â”‚ Check        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                       â”‚
                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          v
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚    ALL 5 GATES PASS?        â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚           â”‚
                              YES   â”‚           â”‚ NO
                                    v           v
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚  OUTPUT   â”‚  â”‚ RETRY (max 2) â”‚
                           â”‚  Image    â”‚  â”‚ Gate-specific â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ëª¨ë“ˆ êµ¬ì¡°

```
core/brandcut/
â”œâ”€â”€ __init__.py              # í†µí•© ì§„ì…ì 
â”œâ”€â”€ analyzer.py              # ì°©ì¥ ë¶„ì„ (VLM)
â”œâ”€â”€ generator.py             # ì´ë¯¸ì§€ ìƒì„±
â”œâ”€â”€ prompt_builder.py        # í”„ë¡¬í”„íŠ¸ ì¡°ë¦½
â”œâ”€â”€ korean_prompt_builder.py # í•œêµ­ì–´ í”„ë¡¬í”„íŠ¸
â”œâ”€â”€ templates.py             # í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿
â”œâ”€â”€ mlb_validator.py         # 5-Gate ê²€ì¦ê¸° (MLB ë¸Œëœë“œ)
â”œâ”€â”€ retry_generator.py       # Gateë³„ ì¬ì‹œë„ ìƒì„±ê¸°
â””â”€â”€ IMPLEMENTATION.md        # êµ¬í˜„ ë¬¸ì„œ

.claude/skills/ë¸Œëœë“œì»·_brand-cut/
â”œâ”€â”€ README.md                # ì´ ë¬¸ì„œ
â”œâ”€â”€ SKILL.md                 # Claudeìš© ìŠ¤í‚¬ ì •ì˜
â””â”€â”€ mlb-prompt-cheatsheet.md # MLB í”„ë¡¬í”„íŠ¸ ì¹˜íŠ¸ì‹œíŠ¸
```

---

## ë°ì´í„° í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ANALYSIS PHASE                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Outfit Images (ì°©ì¥)
     â”‚
     â””â”€â”€> analyze_outfit() â”€â”€> Outfit Analysis
               â”‚
               â”œâ”€â”€ items: [
               â”‚     {
               â”‚       name: "ë°”ì‹œí‹° ì í¼",
               â”‚       color: "ë„¤ì´ë¹„ + í™”ì´íŠ¸",
               â”‚       logo: "NY ë¡œê³  (ê°€ìŠ´)",
               â”‚       details: ["ë ˆí„°ë§", "ìŠ¤ëƒ…ë²„íŠ¼"],
               â”‚       silhouette: "ë°•ì‹œí•"
               â”‚     },
               â”‚     ...
               â”‚   ]
               â”œâ”€â”€ layering_order: ["ì•„ìš°í„°", "ì´ë„ˆ", "í•˜ì˜"]
               â””â”€â”€ style_vibe: "ìŠ¤íŠ¸ë¦¿ ìºì£¼ì–¼"


Concept/Reference (ì»¨ì…‰)
     â”‚
     â””â”€â”€> analyze_concept() â”€â”€> Concept Analysis
               â”‚
               â”œâ”€â”€ mood: "ë‹¤ì´ë‚´ë¯¹, ì—ë„ˆì§€í‹±"
               â”œâ”€â”€ lighting: "í•˜ì´í‚¤ ìì—°ê´‘"
               â”œâ”€â”€ background: "ë„ì‹¬ ìŠ¤íŠ¸ë¦¿"
               â””â”€â”€ pose_direction: "ì•¡í‹°ë¸Œ ë¬´ë¸Œë¨¼íŠ¸"


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              GENERATION PHASE                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Analysis Results
     â”‚
     â””â”€â”€> build_brandcut_prompt()
               â”‚
               â”œâ”€â”€ 1. Brand DNA (MLB/Discovery/etc.)
               â”œâ”€â”€ 2. Outfit Description (ì°©ì¥ ë¶„ì„ ê²°ê³¼)
               â”œâ”€â”€ 3. Model Specification (ì–¼êµ´, ì²´í˜•)
               â”œâ”€â”€ 4. Concept/Mood
               â”œâ”€â”€ 5. Pose & Composition
               â”œâ”€â”€ 6. Lighting & Background
               â””â”€â”€ 7. Quality Requirements
                         â”‚
                         v
               generate_brandcut()
                         â”‚
                         â”œâ”€â”€ Face Image (API ì§ì ‘ ì „ë‹¬)
                         â”œâ”€â”€ Outfit Images (API ì§ì ‘ ì „ë‹¬)
                         â””â”€â”€ Prompt (í…ìŠ¤íŠ¸)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            VALIDATION PHASE (5-Gate)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Generated Image + Reference Images
     â”‚
     â””â”€â”€> MLBValidator.validate()
               â”‚
               â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚   â”‚          SEQUENTIAL GATE CHECK          â”‚
               â”‚   â”‚         (íƒˆë½ ì‹œ ë‹¤ìŒ Gate ì•ˆ ë´„)         â”‚
               â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”œâ”€â”€> GATE 1: ì°©ì¥ ê²€ì¦ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
               â”‚         â”‚
               â”‚         â”œâ”€â”€ ëª¨ë“  ì°©ì¥ ì•„ì´í…œ ì¡´ì¬?
               â”‚         â”œâ”€â”€ ìƒ‰ìƒ ì¼ì¹˜?
               â”‚         â”œâ”€â”€ ë¡œê³  ìœ„ì¹˜/ë””ìì¸ ì¼ì¹˜?
               â”‚         â””â”€â”€ ì‹¤ë£¨ì—£ ì¼ì¹˜?
               â”‚                   â”‚
               â”‚             FAIL? â”€â”€> ì¦‰ì‹œ ì¬ìƒì„± (ì°©ì¥ ê°•í™”)
               â”‚
               â”œâ”€â”€> GATE 2: ì–¼êµ´ ê²€ì¦ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
               â”‚         â”‚
               â”‚         â”œâ”€â”€ ë™ì¼ ì¸ë¬¼?
               â”‚         â”œâ”€â”€ ì–¼êµ´ ë¹„ìœ¨ ì¼ì¹˜?
               â”‚         â””â”€â”€ í”¼ë¶€í†¤ ì¼ì¹˜?
               â”‚                   â”‚
               â”‚             FAIL? â”€â”€> ì¦‰ì‹œ ì¬ìƒì„± (ì–¼êµ´ ê°•í™”)
               â”‚
               â”œâ”€â”€> GATE 3: í¬ì¦ˆ ê²€ì¦ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
               â”‚         â”‚
               â”‚         â”œâ”€â”€ ê´€ì ˆ ìì—°ìŠ¤ëŸ¬ì›€?
               â”‚         â”œâ”€â”€ ì†ê°€ë½ ì •ìƒ? (6ê°œ ì´ìƒ = AUTO-FAIL)
               â”‚         â”œâ”€â”€ ì ‘ì§€ ìì—°ìŠ¤ëŸ¬ì›€?
               â”‚         â””â”€â”€ ë°°ê²½ í˜¸í™˜ì„±?
               â”‚                   â”‚
               â”‚             FAIL? â”€â”€> ì¦‰ì‹œ ì¬ìƒì„± (í¬ì¦ˆ ê°•í™”)
               â”‚
               â”œâ”€â”€> GATE 4: ë¸Œëœë“œ í†¤ ê²€ì¦ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
               â”‚         â”‚
               â”‚         â”œâ”€â”€ ë¸Œëœë“œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¤€ìˆ˜?
               â”‚         â””â”€â”€ ê¸ˆì§€ ìš”ì†Œ ìœ„ë°˜?
               â”‚                   â”‚
               â”‚             FAIL? â”€â”€> ì¦‰ì‹œ ì¬ìƒì„± (í†¤ ê°•í™”)
               â”‚
               â””â”€â”€> GATE 5: í’ˆì§ˆ ë§ˆê° ê²€ì¦ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
                         â”‚
                         â”œâ”€â”€ í•´ìƒë„ ì¶©ë¶„?
                         â”œâ”€â”€ ì•„í‹°íŒ©íŠ¸ ì—†ìŒ?
                         â””â”€â”€ AI ëŠë‚Œ ìµœì†Œí™”?
                                   â”‚
                         âš ï¸ 0ê°œ = 100ì 
                         âš ï¸ 1ê°œ = 98ì 
                         âš ï¸ 2ê°œ = 95ì 
                         âš ï¸ 3ê°œ+ = ì¬ìƒì„±
```

---

## í•µì‹¬ ì›ì¹™

### 1. ì°©ì¥ ë¶„ì„ í•„ìˆ˜

```python
# ê¸ˆì§€: ì°©ì¥ ë¶„ì„ ì—†ì´ ë°”ë¡œ ìƒì„±
images = generate_brandcut(prompt, faces, outfits)  # X

# í•„ìˆ˜: ì°©ì¥ ë¶„ì„ ë¨¼ì €
outfit_result = analyze_outfit(client, outfit_images)
prompt = build_prompt(outfit_analysis=outfit_result, ...)
images = generate_brandcut(prompt, faces, outfits)  # O
```

### 2. ì´ë¯¸ì§€ ì „ì†¡ ìš°ì„ ìˆœìœ„

| ìˆœìœ„ | í•­ëª© | ì „ì†¡ ë°©ì‹ |
|------|------|----------|
| 1 | ì°©ì¥ ì´ë¯¸ì§€ | API ì§ì ‘ ì „ë‹¬ (ì „ì²´!) |
| 2 | ì–¼êµ´ ì´ë¯¸ì§€ | API ì§ì ‘ ì „ë‹¬ |
| 3 | ì»¨ì…‰/ë¬´ë“œ | VLM ë¶„ì„ â†’ í…ìŠ¤íŠ¸ |
| 4 | ë°°ê²½/ì¡°ëª… | VLM ë¶„ì„ â†’ í…ìŠ¤íŠ¸ |

### 3. 5-Gate ìˆœì°¨ ê²€ì¦

```
Gate 1 (ì°©ì¥) FAIL â†’ Gate 2~5 ê²€ì‚¬ ì•ˆ í•¨ â†’ ì°©ì¥ ê°•í™” ì¬ìƒì„±
Gate 2 (ì–¼êµ´) FAIL â†’ Gate 3~5 ê²€ì‚¬ ì•ˆ í•¨ â†’ ì–¼êµ´ ê°•í™” ì¬ìƒì„±
...
```

---

## ì‚¬ìš©ë²•

### Python API

```python
from core.brandcut import generate_with_validation, analyze_outfit

# ì°©ì¥ ë¶„ì„
outfit_analysis = analyze_outfit(client, outfit_images)

# ìƒì„± + ê²€ì¦
result = generate_with_validation(
    prompt_json=prompt,
    face_images=face_imgs,
    outfit_images=outfit_imgs,
    api_key=api_key,
    max_retries=2,
)
```

### ê²°ê³¼ êµ¬ì¡°

```python
{
    "image": PIL.Image,
    "score": 95,
    "passed": True,
    "gate_results": {
        "outfit": {"score": 92, "passed": True},
        "face": {"score": 95, "passed": True},
        "pose": {"score": 88, "passed": True},
        "brand_tone": {"score": 90, "passed": True},
        "quality": {"score": 98, "passed": True},
    },
    "attempts": 1,
    "history": [...]
}
```

---

## ê²€ì¦ ê¸°ì¤€ (5-Gate)

| Gate | í•­ëª© | íƒˆë½ ì¡°ê±´ | ë¹„êµ ëŒ€ìƒ |
|------|------|----------|----------|
| 1 | ì°©ì¥ | ëˆ„ë½/ìƒ‰ìƒ/ë¡œê³ /ì‹¤ë£¨ì—£ ë¶ˆì¼ì¹˜ | ì°©ì¥ ì´ë¯¸ì§€ |
| 2 | ì–¼êµ´ | ë‹¤ë¥¸ ì‚¬ëŒ/ë¹„ìœ¨/í”¼ë¶€í†¤ ë¶ˆì¼ì¹˜ | ì–¼êµ´ ì´ë¯¸ì§€ |
| 3 | í¬ì¦ˆ | ê´€ì ˆ/ì†ê°€ë½/ì ‘ì§€/ë°°ê²½í˜¸í™˜ ì–´ìƒ‰ | ìì²´ íŒë‹¨ |
| 4 | ë¸Œëœë“œ í†¤ | ë¼ì´ë¸ŒëŸ¬ë¦¬ ê¸ˆì§€ ìš”ì†Œ ìœ„ë°˜ | í”„ë¡¬í”„íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ |
| 5 | í’ˆì§ˆ | âš ï¸ 3ê°œ ì´ìƒ | ìì²´ íŒë‹¨ |

**Auto-Fail ì¡°ê±´:**
- ì†ê°€ë½ 6ê°œ ì´ìƒ
- ì–¼êµ´ ì™„ì „íˆ ë‹¤ë¥¸ ì‚¬ëŒ
- ì°©ì¥ ìƒ‰ìƒ/ë¡œê³  ì™„ì „ ë¶ˆì¼ì¹˜

---

## ë¸Œëœë“œë³„ ì¹˜íŠ¸ì‹œíŠ¸

| ë¸Œëœë“œ | ì¹˜íŠ¸ì‹œíŠ¸ | ìƒíƒœ |
|--------|---------|------|
| MLB | `mlb-prompt-cheatsheet.md` | âœ… |
| Discovery | (ì˜ˆì •) | ğŸ”œ |
| Duvetica | (ì˜ˆì •) | ğŸ”œ |

---

## ë³€ê²½ ì´ë ¥

| ë²„ì „ | ë‚ ì§œ | ë³€ê²½ ë‚´ìš© |
|------|------|----------|
| 3.0.0 | 2026-02-12 | ëª¨ë“ˆ ë¶„ë¦¬ (core/brandcut/) |
| 2.0.0 | 2026-02-10 | 5-Gate ìˆœì°¨ ê²€ì¦ ì²´ê³„ |
| 1.0.0 | 2026-02-05 | ì´ˆê¸° ë²„ì „ |
